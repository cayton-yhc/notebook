# 最大跨距问题（题解与错因总结）

## ————题源：BUCTOJ-基础50题-AC

## ✅ 正确思路

1. **题意翻译**
   - 给定字符串 `S` 和子串 `S1`、`S2`。
   - 要求：S1 出现在左边，且右端点 < S2 左端点。
   - 输出最大跨距（S2 左端点 - S1 右端点 - 1）；若不存在输出 -1。

2. **需要的数据**
   - `S` 中所有 `S1` 的出现位置。
   - `S` 中所有 `S2` 的出现位置。

3. **如何得到**
   - 用 `strstr` 循环查找：
     ```c
     char *p = S;
     while ((p = strstr(p, S1)) != NULL) {
         pos1[cnt1++] = p - S;
         p++;
     }
     ```
   - 同理查找 `S2`。

4. **逻辑组合**
   - 枚举所有 `(pos1, pos2)`。
   - 判断：`pos1 + len1 <= pos2`。
   - 跨度公式：`dist = pos2 - (pos1 + len1)`。

---

## ❌ 核心错因

1. **`strtok` 用法错误**  
   - 错写：`char s = strtok(str, ",");`  
   - 正确：`char *s = strtok(str, ",");`  

2. **思路只考虑“最左 + 最右”**  
   - 容易漏掉合法情况。  
   - 正确：收集全部出现位置，枚举组合。

3. **跨度公式写错**  
   - 错：`pos2 - (pos1 + len1 - 1)`（贴合时结果为 1）。  
   - 正：`pos2 - (pos1 + len1)`（贴合时结果为 0）。

---

## 📎 总结

- 关键点：**收集所有位置 → 枚举组合 → 判断条件 → 更新答案**。  
- 记忆法：**“子串问题 → `strstr` 多次查找 → 下标数组 → 枚举判断”**。
